<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Happy Birthday!</title>
    <style>
        /* --- å…¨å±€é‡ç½® --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: linear-gradient(180deg, #fff0f5 0%, #ffe4e1 100%);
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
            overflow: hidden;
            height: 100vh;
            color: #5d4037;
            display: flex;
            justify-content: center;
            background-color: #f0f0f0;
        }

        /* --- ğŸ“± æ‰‹æœºå®¹å™¨ --- */
        #app-container {
            position: relative;
            width: 100%;
            height: 100%;
            max-width: 450px;
            background: linear-gradient(180deg, #fff0f5 0%, #ffe4e1 100%);
            overflow: hidden;
            box-shadow: 0 0 40px rgba(0,0,0,0.1);
        }

        /* --- å¯åŠ¨é¡µ & é‡æ’­é¡µ --- */
        #start-screen, #replay-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff0f5; z-index: 999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.5s;
        }
        #replay-screen { display: none; opacity: 0; }

        .play-btn {
            width: 80px; height: 80px;
            background: #ff6b81;
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            box-shadow: 0 0 20px rgba(255, 107, 129, 0.4);
            animation: pulse 2s infinite;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .play-btn:active { transform: scale(0.95); }

        /* å¼€å§‹å›¾æ ‡ */
        .play-icon {
            width: 0; height: 0;
            border-left: 25px solid #fff;
            border-top: 15px solid transparent;
            border-bottom: 15px solid transparent;
            margin-left: 5px;
        }

        /* é‡æ’­å›¾æ ‡ (SVG) */
        .replay-icon-svg {
            width: 40px; height: 40px;
            fill: #fff;
        }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        /* --- éŸ³ä¹æŒ‰é’® --- */
        .music-btn {
            position: absolute; top: 20px; right: 20px; z-index: 100;
            width: 36px; height: 36px; background: rgba(255,255,255,0.8);
            border-radius: 50%; box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex; justify-content: center; align-items: center; cursor: pointer;
            display: none;
        }
        .music-btn.playing { animation: spin 4s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* --- é¡µé¢é€šç”¨ --- */
        .page {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: none; flex-direction: column;
            justify-content: flex-start;
            padding-top: 30px;
            opacity: 0; transition: opacity 0.8s ease;
        }
        .page.active { display: flex; opacity: 1; z-index: 10; }

        /* --- å›¾ç‰‡å®¹å™¨ --- */
        .img-area {
            position: relative;
            width: 100%;
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
        }

        .img-area img {
            display: block;
            box-shadow: 0 6px 18px rgba(0,0,0,0.12);
            background: #fff;
            transition: all 0.5s;
        }

        /* --- æ–‡å­—å®¹å™¨ --- */
        .text-area {
            position: relative;
            width: 100%;
            padding: 10px 30px 110px 30px;
            text-align: center;
            z-index: 20;
            background: linear-gradient(to top, #ffe4e1 15%, transparent 100%);
        }
        .title { font-size: 1.4rem; color: #ff6b81; margin-bottom: 8px; font-weight: bold; letter-spacing: 1px; }
        .desc { font-size: 0.95rem; line-height: 1.6; color: #666; white-space: pre-wrap; }

        /* =========================================
           ğŸŒŸ æ ¸å¿ƒç‰ˆå¼ CSS (å·²æ”¾å®½æé™é«˜åº¦ä¸å®½åº¦)
           ========================================= */

        /* 1. HERO (ä¸»è§’) */
        .style-hero .img-area img {
            max-width: 90%; max-height: 60vh; /* æé™æ”¾å¤§ */
            border-radius: 12px; border: 5px solid #fff;
            --r: -2deg;
        }

        /* 2. FILM (èƒ¶å·) */
        .style-film .img-area { flex-direction: column; justify-content: flex-start; padding-top: 5px; }
        .style-film img {
            max-width: 85%; /* æ”¾å®½å®½åº¦é™åˆ¶ */
            max-height: 22vh; /* å¤§å¹…æ”¾å®½é«˜åº¦ï¼Œç«–å›¾ä¹Ÿèƒ½å˜å¤§ */
            margin-bottom: 12px;
            border: 4px solid #fff; border-bottom: 15px solid #fff;
        }
        .style-film img:nth-child(1) { --r: -2deg; margin-left: -15px; }
        .style-film img:nth-child(2) { --r: 2deg; margin-right: -15px;}
        .style-film img:nth-child(3) { --r: -1deg; margin-left: -5px;}

        /* 3. GRID (æ‹¼å›¾) */
        .style-grid .img-area { flex-direction: column; justify-content: center; }
        .style-grid img {
            max-width: 85%; max-height: 30vh; /* è°ƒå¤§é™åˆ¶ */
            margin: 5px 0;
            border-radius: 4px; --r: 0deg;
        }
        .style-grid img:nth-child(1) { border-radius: 12px 12px 0 12px; margin-left: -10px; }
        .style-grid img:nth-child(2) { border-radius: 0 12px 12px 12px; margin-right: -10px; }

        /* 4. SCATTER (æ•£è½) */
        .style-scatter .img-area img {
            position: absolute;
            max-width: 55%; max-height: 35vh; /* è°ƒå¤§é™åˆ¶ */
            border: 4px solid #fff;
        }
        .style-scatter img:nth-child(1) { top: 5%; left: 8%; --r: -6deg; z-index: 1; }
        .style-scatter img:nth-child(2) { top: 30%; right: 8%; --r: 5deg; z-index: 2; }
        .style-scatter img:nth-child(3) { top: 55%; left: 12%; --r: -3deg; z-index: 3; }
        .style-scatter .img-area img:nth-child(1):nth-last-child(2) { top: 12%; left: 12%; }
        .style-scatter .img-area img:nth-child(2):nth-last-child(1) { top: 40%; right: 12%; }

        /* 5. MAGAZINE (æ‚å¿—) */
        .style-magazine .img-area { align-items: flex-start; padding-top: 20px; justify-content: center; }
        .style-magazine img {
            max-width: 90%; max-height: 60vh; border-radius: 80px 80px 0 0;
            border: 4px solid #fff; --r: 0deg;
        }

        /* 6. SIMPLE (æ­£ä¸­) */
        .style-simple .img-area img {
            max-width: 85%; max-height: 60vh;
            border: 8px solid #fff; border-bottom: 25px solid #fff;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15); --r: 0deg;
        }

        /* --- åŠ¨ç”» --- */
        .page.active .img-area img { animation: zoomIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; opacity: 0; }
        .page.active .text-area { animation: slideUp 1s 0.4s ease forwards; opacity: 0; transform: translateY(20px); }

        @keyframes zoomIn { from { opacity: 0; transform: scale(0.9) rotate(0deg); } to { opacity: 1; transform: scale(1) rotate(var(--r, 0deg)); } }
        @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

    <div id="app-container">

        <div id="start-screen">
            <div class="play-btn" onclick="startJourney()">
                <div class="play-icon"></div>
            </div>
            <p style="margin-top: 20px; color: #ff6b81; font-weight: bold;">ç‚¹å‡»å¼€å¯ 20 å²</p>
        </div>

        <div id="replay-screen">
            <div class="play-btn" onclick="replayJourney()">
                <svg class="replay-icon-svg" viewBox="0 0 24 24">
                    <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                </svg>
            </div>
            <p style="margin-top: 20px; color: #ff6b81; font-weight: bold;">å†çœ‹äº¿é âœ¨</p>
        </div>

        <div class="music-btn" id="musicBtn">ğŸµ</div>
        <audio id="bgm" src="bgm.mp3"></audio>

        <div id="stage"></div>

    </div>

    <script>
        // ==========================================
        // ğŸŒŸ Wishlist é…ç½® (4.7s x 13é¡µ = 61.1ç§’)
        // ==========================================
        const slides = [
            // --- 01. Intro ---
            {
                style: 'magazine',
                imgs: ['img/1.jpg'],
                title: 'Hey Girl',
                text: 'æˆ‘æœ€äº²çˆ±çš„ä½ \n20å²ç”Ÿæ—¥å¿«ä¹ï¼'
            },

            // --- 02. Verse ---
            {
                style: 'film',
                imgs: ['img/2_1.jpg', 'img/2_2.jpg', 'img/2_3.jpg'],
                title: 'æ—¶å…‰é£é€',
                text: 'ç®—ç®—æ—¶é—´ï¼Œä¸€æ™ƒå·²ç»å››å¹´å¤šè¿‡å»äº†ã€‚\nç°åœ¨æƒ³æƒ³ä»¥å‰çš„ç‚¹ç‚¹æ»´æ»´è¿˜æ˜¯å¾ˆç¾å¥½ã€‚'
            },

            // --- 03. ---
            {
                style: 'grid',
                imgs: ['img/3_1.jpg', 'img/3_2.jpg'],
                title: 'ç›¸éš”ä¸¤åœ°',
                text: 'è™½ç„¶æˆ‘ä»¬å¤§åŠå¹´éƒ½åœ¨å¼‚åœ°ï¼Œä¸èƒ½æƒ³è§å°±è§ã€‚\nä½†æ¯å¤©çš„ç¢ç¢å¿µï¼Œå¶å°”çš„deep talk\næ˜¯æˆ‘æ¯å¤©æœ€æ”¾æ¾ã€æœ€å®‰å¿ƒçš„æ—¶åˆ»ã€‚'
            },

            // --- 04. é»˜å¥‘ä¸åˆæ‹ ---
            {
                style: 'hero',
                imgs: ['img/4.jpg'],
                title: 'æœ€å¥½çš„æœ‹å‹',
                text: 'è·Ÿä½ åœ¨ä¸€èµ·æœ€èˆ’æœçš„ä¸€ç‚¹å°±æ˜¯ï¼Œ\nä»€ä¹ˆåºŸè¯éƒ½å¯ä»¥éšä¾¿è¯´ã€‚\nä¸ç®¡é‡åˆ°å¤šå°çš„äº‹ï¼Œå¼€å¿ƒçš„è¿˜æ˜¯æƒ³åæ§½çš„ï¼Œ\nç¬¬ä¸€ä¸ªæƒ³åˆ†äº«çš„äººæ°¸è¿œæ˜¯ä½ ã€‚'
            },

            // --- 05. å¿ƒç–¼ ---
            {
                style: 'scatter',
                imgs: ['img/5_1.jpg', 'img/5_2.jpg'],
                title: 'è¾›è‹¦å•¦',
                text: 'å°å®çš„è¯¾ä¸šæ¯”æˆ‘é‡å¤šäº†ï¼Œè¿˜è¦å¿™å›¢å§”çš„å„ç§äº‹æƒ…ã€‚\nä¸è¦è€ä¸ºæ²¡å‘ç”Ÿçš„äº‹æƒ…å†…è€—ç„¦è™‘ï¼\nåœ¨æˆ‘å¿ƒé‡Œä½ æ˜¯æœ€æ£’çš„'
            },

            // --- 06. Pre-Chorus ---
            {
                style: 'grid',
                imgs: ['img/6_1.jpg', 'img/6_2.jpg'],
                title: 'æƒ³è§ä½ ',
                text: 'æ¯æ¬¡å»è§ä½ çš„è·¯ä¸Šï¼Œ\nå¿ƒæƒ…éƒ½è·Ÿè¿™é¦–æ­Œçš„é¼“ç‚¹ä¸€æ ·ã€‚\n\nçœŸçš„å¥½æƒ³å¥½æƒ³å¿«ç‚¹ç»“æŸå¼‚åœ°å•Šï¼Œ\nå¸¦ä½ å»é‚£äº›æˆ‘ä»¬è¦å»çš„åœ°æ–¹ã€‚'
            },

            // --- 07. é“ºå«ç»“æŸ ---
            {
                style: 'hero',
                imgs: ['img/7.jpg'],
                title: 'å¬~',
                text: 'ç¢ç¢å¿µäº†è¿™ä¹ˆå¤šï¼Œ\nå…¶å®ä»Šå¤©æœ€æƒ³å¯¹ä½ è¯´çš„è¯è¿˜åœ¨åé¢ã€‚'
            },

            // --- 08. Chorus ---
            {
                style: 'hero',
                imgs: ['img/8.jpg'],
                title: 'ğŸ’¥ 20å²å¿«ä¹ï¼',
                text: 'ç¥æˆ‘çš„å¥³å­©20å²ç”Ÿæ—¥å¿«ä¹ï¼ï¼\n\nå¸Œæœ›ä½ æ°¸è¿œæ˜åªšã€æ°¸è¿œè‡ªç”±ã€\næ°¸è¿œåšé‚£ä¸ªæ— å¿§æ— è™‘çš„å°æœ‹å‹ï¼'
            },

            // --- 09. Wishlist ---
            {
                style: 'scatter',
                imgs: ['img/9_1.jpg', 'img/9_2.jpg'],
                title: 'My Wishlist',
                text: 'æˆ‘ä¹Ÿå¸Œæœ›å°å®æ–°çš„ä¸€å²èƒ½å°‘ç†¬ç‚¹å¤œï¼Œ\næ¯å¤©éƒ½èƒ½ç¡ä¸ªæ— å¿§æ— è™‘çš„å¥½è§‰ï¼Œ\næ‰€æœ‰çš„åŠªåŠ›éƒ½èƒ½å¾—åˆ°æ»¡åˆ†çš„å›æŠ¥ï¼Œ\nä½ ä¸€å®šå¯ä»¥æˆåŠŸçš„ï¼'
            },

            // --- 10. ---
            {
                style: 'magazine',
                imgs: ['img/10.jpg'],
                title: 'åšä½ è‡ªå·±',
                text: 'æƒ³åšä»€ä¹ˆå°±å¤§èƒ†å»åšå§ï¼Œ\nä¸è¦æœ‰ä»€ä¹ˆé¡¾è™‘ã€‚\nåæ­£æ— è®ºå¦‚ä½•ï¼Œæˆ‘éƒ½æ— æ¡ä»¶ç«™åœ¨ä½ è¿™è¾¹ã€‚'
            },

            // --- 11. ---
            {
                style: 'film',
                imgs: ['img/11_1.jpg', 'img/11_2.jpg', 'img/11_3.jpg'],
                title: 'è°¢è°¢ä½ ',
                text: 'å¾ˆæƒ³è·Ÿä½ è¯´è°¢è°¢ã€‚\nå¼‚åœ°æ‹çœŸçš„å¾ˆè¾›è‹¦ï¼Œä½†ä½ ä»æ¥æ²¡æŠ±æ€¨è¿‡ã€‚\nè°¢è°¢ä½ ä¸€ç›´é™ªç€æˆ‘ï¼Œ\nä¹ŸåŒ…å®¹æˆ‘çš„ç¼ºç‚¹ã€‚'
            },

            // --- 12. ---
            {
                style: 'scatter',
                imgs: ['img/12_1.jpg', 'img/12_2.jpg'],
                title: 'ç­‰ä½ ',
                text: 'ä»Šå¹´ä¸èƒ½åœ¨ä½ èº«è¾¹è¿‡ç”Ÿæ—¥\n\nå¸Œæœ›ä¹‹åå†ä¹Ÿä¸ä¼šç¼ºå¸­äº†ï¼'
            },

            // --- 13. End ---
            {
                style: 'simple',
                imgs: ['img/13.jpg'],
                title: 'Love You',
                text: 'å°å®20å²çš„ç¬¬ä¸€å¤©ï¼Œ\nä¸€å®šè¦è¿‡çš„å¼€å¿ƒï¼\n\nâ¤ï¸çˆ±ä½ çš„å½­æ„æ¶µ\n2026.2.22'
            }
        ];

        // ==========================================
        // âš™ï¸ é€»è¾‘ä»£ç 
        // ==========================================
        let currentIndex = 0;
        let autoPlayTimer = null;
        // 4700ms * 13é¡µ = 61.1ç§’
        const AUTO_PLAY_INTERVAL = 4700;

        const stage = document.getElementById('stage');
        const startScreen = document.getElementById('start-screen');
        const replayScreen = document.getElementById('replay-screen');
        const bgm = document.getElementById('bgm');
        const musicBtn = document.getElementById('musicBtn');

        function render() {
            let html = '';
            slides.forEach((slide, index) => {
                const activeClass = index === 0 ? 'active' : '';
                let imgsHtml = '';
                slide.imgs.forEach(src => imgsHtml += `<img src="${src}">`);

                html += `
                    <div class="page style-${slide.style} ${activeClass}" data-index="${index}">
                        <div class="img-area">${imgsHtml}</div>
                        <div class="text-area">
                            <div class="title">${slide.title}</div>
                            <div class="desc">${slide.text}</div>
                        </div>
                    </div>
                `;
            });
            stage.innerHTML = html;
        }

        // ç¬¬ä¸€æ¬¡å¼€å§‹
        function startJourney() {
            bgm.currentTime = 0;
            bgm.play().then(() => {
                musicBtn.classList.add('playing');
                musicBtn.style.display = 'flex';
            }).catch(e => console.log(e));

            startScreen.style.opacity = 0;
            setTimeout(() => {
                startScreen.style.display = 'none';
                startAutoPlay();
            }, 500);
        }

        // é‡æ–°å¼€å§‹
        function replayJourney() {
            replayScreen.style.opacity = 0;
            setTimeout(() => {
                replayScreen.style.display = 'none';

                currentIndex = 0;
                const pages = document.querySelectorAll('.page');
                pages.forEach((p, i) => {
                    p.classList.remove('active');
                    p.style.opacity = '';
                    if(i === 0) p.classList.add('active');
                });

                bgm.currentTime = 0;
                bgm.play();
                musicBtn.classList.add('playing');

                startAutoPlay();

            }, 500);
        }

        function nextSlide() {
            if (currentIndex >= slides.length - 1) {
                if(autoPlayTimer) clearInterval(autoPlayTimer);

                bgm.pause();
                musicBtn.classList.remove('playing');

                setTimeout(() => {
                    replayScreen.style.display = 'flex';
                    setTimeout(() => replayScreen.style.opacity = 1, 50);
                }, 500);

                return;
            }

            const current = document.querySelector('.page.active');
            const nextIndex = (currentIndex + 1) % slides.length;
            const next = document.querySelector(`.page[data-index="${nextIndex}"]`);

            if(current && next) {
                current.style.opacity = 0;
                setTimeout(() => {
                    current.classList.remove('active');
                    current.style.opacity = '';
                    next.classList.add('active');
                }, 800);
                currentIndex = nextIndex;
            }
        }

        function startAutoPlay() {
            if(autoPlayTimer) clearInterval(autoPlayTimer);
            autoPlayTimer = setInterval(() => {
                nextSlide();
            }, AUTO_PLAY_INTERVAL);
        }

        window.addEventListener('load', () => {
            render();
        });

        // éŸ³ä¹å¼€å…³
        musicBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if(bgm.paused) { bgm.play(); musicBtn.classList.add('playing'); }
            else { bgm.pause(); musicBtn.classList.remove('playing'); }
        });

    </script>
</body>
</html>